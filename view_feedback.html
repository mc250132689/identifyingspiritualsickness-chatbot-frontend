<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>View Feedback</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<link rel="stylesheet" href="style.css">
<style>
.container{max-width:800px;margin:auto;padding:20px;}
.feedback-card{background:#fff;padding:14px;border-radius:10px;margin-bottom:12px;border-left:4px solid #3b5e53;}
.meta{font-size:13px;color:#58736d;margin-bottom:6px;}
.btn{padding:8px 14px;border-radius:8px;background:#1f3d39;color:white;cursor:pointer;}
.btn:hover{background:#335b53;}
</style>
</head>
<body>
<div class="container">
<h1>ðŸ“„ Feedback Responses</h1>
<button id="refresh" class="btn">Refresh</button>
<div id="feedback-list">Loading...</div>
</div>
<script>
const FEEDBACK_API = "https://identifyingspiritualsickness-chatbot.onrender.com/get-feedback";
const list = document.getElementById("feedback-list");
document.getElementById("refresh").addEventListener("click", loadFeedback);
async function loadFeedback(){
  list.textContent="Loading...";
  try{
    const res=await fetch(FEEDBACK_API);
    const data=await res.json();
    if(!data||!data.length){ list.innerHTML="<p>No feedback submitted yet.</p>"; return; }
    list.innerHTML="";
    data.slice().reverse().forEach(fb=>{
      const card=document.createElement("div");
      card.className="feedback-card";
      card.innerHTML=`<div class="meta"><strong>${fb.name||"Anonymous"}</strong>${fb.student_id?`â€¢ ${fb.student_id}`:""}${fb.program?`â€¢ ${fb.program}`:""}</div>
      <div><strong>Chatbot Usability:</strong> ${fb.q4||'-'}<br><strong>Clarity:</strong> ${fb.q5||'-'}<br>
      <strong>Difficulty:</strong> ${fb.q6||'-'}<br><strong>Relevance:</strong> ${fb.q7||'-'}<br>
      <strong>Accuracy:</strong> ${fb.q8||'-'}<br><strong>Misleading:</strong> ${fb.q9||'-'}<br>
      <strong>Helpfulness:</strong> ${fb.q10||'-'}<br><strong>Would Use Again:</strong> ${fb.q11||'-'}<br>
      <strong>Suggestions:</strong><br>${fb.q12||'-'}<br><strong>Overall Satisfaction:</strong> ${fb.q13||'-'}<br>
      <strong>Additional Comments:</strong><br>${fb.q14||'-'}</div>`;
      list.appendChild(card);
    });
  }catch(err){console.error(err); list.textContent="Failed to load feedback.";}
}
loadFeedback();
setInterval(loadFeedback,10000);
</script>
</body>
</html>
