<button id="delete-all-btn" style="background:red;color:white;">ğŸ—‘ï¸ Delete All Data</button>
<button id="export-json-btn" style="background:#ffc107;color:white;">ğŸ’¾ Export JSON</button>

<script>
const deleteBtn = document.getElementById("delete-all-btn");
const exportBtn = document.getElementById("export-json-btn");

deleteBtn.addEventListener("click", async () => {
  if (!confirm("âš ï¸ Are you sure you want to delete all training data?")) return;
  const key = document.getElementById("admin-key").value.trim();
  const res = await fetch(`${BASE_URL}/admin-delete?key=${key}`, { method: "DELETE" });
  const data = await res.json();
  alert(data.message);
  location.reload();
});

exportBtn.addEventListener("click", async () => {
  const key = document.getElementById("admin-key").value.trim();
  const res = await fetch(`${BASE_URL}/export-json?key=${key}`);
  const data = await res.json();
  const blob = new Blob([JSON.stringify(data.training_data, null, 2)], { type: "application/json" });
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");
  a.href = url;
  a.download = "training_data.json";
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
});
</script>
