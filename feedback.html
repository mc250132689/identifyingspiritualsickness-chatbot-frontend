<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Submit Feedback</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<link rel="stylesheet" href="style.css">
</head>
<body>
<div class="container">
  <h2>Feedback Form</h2>
  <form id="feedback-form">
    <input type="text" name="name" placeholder="Name">
    <input type="text" name="student_id" placeholder="Student ID">
    <input type="text" name="program" placeholder="Program">
    <label>Chatbot Usability</label>
    <select name="q4">
      <option>Very easy</option><option>Easy</option><option>Neutral</option><option>Difficult</option><option>Very difficult</option>
    </select>
    <textarea name="q14" placeholder="Additional comments"></textarea>
    <button type="submit">Submit</button>
  </form>
  <p id="status-msg"></p>
</div>

<script>
const API_URL = "https://identifyingspiritualsickness-chatbot.onrender.com";

document.getElementById("feedback-form").addEventListener("submit", async e=>{
  e.preventDefault();
  const form = Object.fromEntries(new FormData(e.target));
  try {
    await fetch(`${API_URL}/submit-feedback`, {
      method:"POST", headers:{"Content-Type":"application/json"}, body:JSON.stringify(form)
    });
    document.getElementById("status-msg").textContent = "✅ Feedback submitted!";
    e.target.reset();
    window.postMessage({type:"refresh-feedback"}, "*");
  } catch(err) {
    document.getElementById("status-msg").textContent = "❌ Failed to submit feedback.";
  }
});
</script>
</body>
</html>
