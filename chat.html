<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>ğŸ•‹ Identifying Spiritual Sickness Chatbot</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="stylesheet" href="style.css">
</head>
<body>
<div class="container">
  <h1>ğŸ•‹ Spiritual Sickness Chatbot</h1>
  <div id="chatbox"></div>
  <textarea id="user-input" placeholder="Type your question..."></textarea>
  <button id="send-btn">Send</button>
</div>

<script>
const API_URL = "https://identifyingspiritualsickness-chatbot.onrender.com";

const chatbox = document.getElementById("chatbox");
const input = document.getElementById("user-input");
const sendBtn = document.getElementById("send-btn");

async function sendMessage() {
  const msg = input.value.trim();
  if(!msg) return;
  addMessage(msg, "user");
  input.value = "";
  try {
    const res = await fetch(`${API_URL}/chat`, {
      method: "POST",
      headers: {"Content-Type":"application/json"},
      body: JSON.stringify({message: msg})
    });
    const data = await res.json();
    addMessage(data.response || "No response.", "bot");
  } catch(e) { addMessage("Failed to get response.", "bot"); }
}

function addMessage(msg, sender){
  const div = document.createElement("div");
  div.className = sender==="user"?"user-msg":"bot-msg";
  div.textContent = msg;
  chatbox.appendChild(div);
  chatbox.scrollTop = chatbox.scrollHeight;
}

sendBtn.addEventListener("click", sendMessage);
input.addEventListener("keypress", e=>{ if(e.key==="Enter") sendMessage(); });
</script>
</body>
</html>
